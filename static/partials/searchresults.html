<div ng-show="searchInProgress">

	<h3>Search for "{{query}}" in progress...</h3>
	<div class="progress progress-striped active">

		<div class="bar" style="width: 100%;"></div>
	</div>

</div>

<div ng-show="searchError && searchWarning != null"
	class="alert alert-error">
	<span class="label label-important">Error</span> {{searchWarning}}
</div>

<div ng-hide="searchError || searchInProgress">
	<h3>Query: {{query}}</h3>
	<div ng-show="searchWarning != null" class="alert alert-error">
		<span class="label label-important">Warning</span> {{searchWarning}}
	</div>

	<!-- no results -->
	<div ng-hide="total > 0" id="searchResultContainer" class="clearfix">
		<h5>No bugs match this query</h5>
	</div>

	<!-- some results -->
	<div ng-show="total > 0" id="searchResultContainer" class="clearfix">
		<div class="container-fluid">
			<div class="row-fluid">

				<!-- facet information -->
				<form>
					<div class="span3">
						<div class="well sidebar-nav">
							<h5>Filter</h5>
							<ul class="nav nav-list">
								<li ng-hide="facets.statuses.terms == null" class="nav-header">Status</li>
								<li ng-repeat="status in facets.statuses.terms"><input
									ng-show="filterStatus.indexOf(status.term) === -1"
									type="checkbox" value="{{status.term}}"
									ng-click="updateStatusFilter(status.term)" /><input
									ng-hide="filterStatus.indexOf(status.term) === -1"
									type="checkbox" value="{{status.term}}"
									ng-click="updateStatusFilter(status.term)" checked />
									{{status.term}} ({{status.count}})</li>
								<li ng-hide="facets.tags.terms == null" class="nav-header">Tags</li>
								<li ng-repeat="tag in facets.tags.terms"><input
									ng-show="filterTags.indexOf(tag.term) === -1" type="checkbox"
									value="{{tag.term}}" ng-click="updateTagFilter(tag.term)" /><input
									ng-hide="filterTags.indexOf(tag.term) === -1" type="checkbox"
									value="{{tag.term}}" ng-click="updateTagFilter(tag.term)"
									checked /> {{tag.term}} ({{tag.count}})</li>
							</ul>
						</div>
					</div>
				</form>

				<!-- search results table -->
				<div class="span9">
					<table class="table-bordered table-striped" width="100%">
						<thead>
							<tr>
								<th>ID</th>
								<th>Title</th>
								<th>Score</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="result in results">
								<td><a class="status-{{result.source.doc.status}}"
									href="/bug/{{result._id}}">{{result._id}}</a></td>
								<td>{{result.source.doc.title}}</td>
								<td>{{result._score}}</td>
							</tr>
						</tbody>
					</table>
					<h5 class="pull-left">Displaying {{firstResult}} -
						{{lastResult}} of {{total}} matching bugs</h5>
					<div class="pagination pull-right">
						<ul>
							<li><a ng-show="page > 1"
								ng-click="jumpToPage(page-1, $event)" href="#">Prev</a><span
								ng-hide="page > 1">Prev</span></li>
							<li ng-repeat="i in validPages"><a ng-show="i != page"
								href="#" ng-click="jumpToPage(i, $event)">{{i}}</a><span
								ng-hide="i != page">{{i}}</span></li>
							<li><a ng-show="page < validPages.length"
								ng-click="jumpToPage(page+1, $event)" href="#">Next</a><span
								ng-hide="page < validPages.length">Next</span></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>



	<!-- file new bug -->
	<hr />
	<div ng-controller="SimilarBugCtrl">
		<form action="/api/bug/" id="newbug" method="POST">
			Briefly describe your new problem: <input type="text"
				ng-model="bugTitle" ng-change="debouncedLookupSimilar()"
				ng-required="true" pattern="(.){4,}"
				title="Bug descriptions must have at least 4 characters"
				name="title" autocomplete="off" />
		</form>
		<div ng-show="similarBugs.length > 0">
			<h5>Existing bugs that appear similar to your problem</h5>
			<ul>
				<li ng-repeat="bug in similarBugs"><a target="_blank"
					href="/bug/{{bug._id}}">{{bug._id}} - {{bug.source.doc.title}}</a></li>
			</ul>
		</div>

	</div>
